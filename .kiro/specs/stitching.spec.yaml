name: Code Stitching Engine
version: 1.0.0
description: Rules and logic for merging code from different programming languages into hybrid programs

requirements:
  - id: REQ-001
    description: Support Python to Rust FFI bridging
    priority: high
    
  - id: REQ-002
    description: Support JavaScript to Python bridging via child_process
    priority: high
    
  - id: REQ-003
    description: Support Go to JavaScript bridging via WASM
    priority: high
    
  - id: REQ-004
    description: Detect and resolve naming conflicts between languages
    priority: high
    
  - id: REQ-005
    description: Handle type mismatches and conversions
    priority: high
    
  - id: REQ-006
    description: Generate glue code for function calls across languages
    priority: high

design:
  architecture:
    - component: Language Bridge Factory
      responsibility: Creates appropriate bridge based on language pair
      
    - component: AST Analyzer
      responsibility: Extracts functions, types, and interfaces from each code block
      
    - component: Compatibility Mapper
      responsibility: Identifies which functions can call each other
      
    - component: Glue Code Generator
      responsibility: Produces bridge code (FFI, WASM, IPC)
      
    - component: Conflict Resolver
      responsibility: Handles naming and type conflicts

  bridges:
    python_rust:
      method: FFI via PyO3 or ctypes
      direction: bidirectional
      
    javascript_python:
      method: child_process or python-shell npm package
      direction: JS calls Python
      
    go_javascript:
      method: WASM compilation
      direction: JS calls Go
      
    typescript_any:
      method: Transpile to JS first, then apply JS bridges
      direction: bidirectional

  stitching_algorithm:
    steps:
      - Parse all input code blocks
      - Extract function signatures and types
      - Build dependency graph
      - Identify entry points and data flow
      - Generate bridge interfaces
      - Produce glue code
      - Combine into project structure

tasks:
  - id: TASK-001
    description: Implement Python-Rust FFI bridge generator
    requirements: [REQ-001]
    
  - id: TASK-002
    description: Implement JS-Python bridge via child_process
    requirements: [REQ-002]
    
  - id: TASK-003
    description: Implement Go-WASM bridge generator
    requirements: [REQ-003]
    
  - id: TASK-004
    description: Build naming conflict resolver
    requirements: [REQ-004]
    
  - id: TASK-005
    description: Build type conversion system
    requirements: [REQ-005]
    
  - id: TASK-006
    description: Build glue code generator
    requirements: [REQ-006]
